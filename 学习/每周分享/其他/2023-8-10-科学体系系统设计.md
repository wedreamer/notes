# 科学体系系统设计

该系统本质为套壳或者二次开发的系统, 即有属于系统本身需要实现的一些功能, 同时也有基于其他原有开源系统的调用.

## 系统概述

系统所要实现的功能点主要包含有:
- 登录, 注册
- 实验数据的录入, 筛选查询, 可视化
- 医学数据的上传, 标记, 可视化, 分析
- 用户个人的上传, 下载, 目录查询
- 公用的上传, 下载, 目录查询
- 任务的执行, 调度, 监控 
- 围绕上述功能其他的一些功能点

### 登录, 注册

登录和注册属于一般性系统的通用功能, 这里使用 jwt token 来完成实现, 但是还有一些其他的额外的操作, 之后再做讨论. jwt token 的实现原理即通过用户名和密码或者其他信息完成用户身份的验证之后给予其凭证, 而该凭证又只能进行校验, 基本上使用的是散列算法进行实现, 散列过程中还需要一个对应的 secret 来保证之后对散列值的反向序列化, 如果没有 secret 则可以认为原数据到散列值的是具有单向性的, 不能通过散列值反推原数据, 但是可以通过原数据计算散列值. 而引入 secret 之后, 拿该 secret 就可以对散列值进行反向散列拿到原来的数据. 纵观该过程, 如果将散列的过程识为加密, 而反散列认为是解密, 很清晰加解密所凭借的 secret 是一致的. 对应的算法应是对称加密算法. 当然 jwt token 的内容并不全是没有 secret 就不可知的, 其中包含了一些元数据, 这里并不再做详细讨论. 

前者讨论完之后, 后者即一些其他的额外的操作. 所谓额外的操作是什么呢？ 即需要去依赖的一个开源系统中做一些初始化的工作, 为什么需要去依赖的系统中做初始化工作, 因为系统内部的一些功能需要跳转到依赖的系统中完成, 比如数据的标注, 图像的标注等, 当跳转时需要用户完成登录才能操作. 很显然上述的现象暴露出一个问题, 多个系统中的用户实际上映射的是同一个用户, 即一个用户在不同系统中同时拥有身份, 理想的情况是使用同一的验证入口统合多个系统, 逻辑上即在不同的系统登录入口架一个登录功能. 实际情况还需要考虑内部系统的身份沟通, 比如在一个 A 系统中有身份之后, 在同属信任的 B 系统中是否需要再次登录？以上简要探讨, 实际的问题还需要更多更详细的考虑. 回到依赖的系统中去, 该系统虽然支持 sso 功能, 即作为一个服务提供者, 外部作为身份提供者即可实现. 举个例子, 比如在 qq 注册一个账号, 而通过该账号可以登录 A 网站, 而该网站就是服务提供者, 而 qq 作为身份来源就是身份提供者. 可以发现中间沟通的内容为身份, 身份提供者为上游, 服务提供者为下游. 这个时候就需要系统本身具有身份提供者的功能, 而该功能的实现相对于系统的调用和同步来说比较复杂. 同时需要注意的是, 系统本身和依赖的系统之间的关系是强依赖的, 而不是独立的, 前者的实现重度依赖后者, 这意味着直接调用或许更合理, 因为本质上是一个大的系统, 而不是两个独立的系统. 继续回到系统调用的讨论中, 这里系统调用并非操作系统术语中的系统调用, 本质上是远程调用. 针对该远程调用的讨论后续在系统设计中再做详细讨论. 这里总论该功能的实现要点和考虑.

### 实验数据的录入, 筛选查询, 可视化

实验数据的录入, 筛选查询, 可视化是系统的核心功能, 实验数据是很大, 小的几百 M, 大的几十 G. 大文件上传的效率底线为程序的处理过程, 上限则为带宽的限制. 前者角度在系统整体上考虑的, 因为文件处理如果不合理, 比如同步处理, 直接导致系统可用性. 而后者则为网络的基本限制. 

## 系统设计

### 数据库选择
### 基本功能实现及通用类设计

### 重难点


#### 复杂查询的实现

#### 外部调用, 系统集成

#### 后台程序处理

## 运维及部署

### 测试环境

### 生产环境


